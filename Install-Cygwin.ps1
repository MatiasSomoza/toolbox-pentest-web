# Source: https://www.willhaley.com/blog/script-install-cygwin-windows/
New-Item "C:\CygwinX64" -ItemType Directory
Invoke-WebRequest "https://www.cygwin.com/setup-x86_64.exe" -OutFile "C:\CygwinX64\setup.exe"
$Cmd = "C:\CygwinX64\setup.exe --site='http://cygwin.mirror.constant.com' --no-shortcuts --no-desktop --quiet-mode --root='C:\cygwinX64\cygwin' --arch='x86_64' --local-package-dir='C:\cygwinX64\cygwin-packages' --prune-install --packages='mingw64-x86_64-gcc-g++,mingw64-i686-gcc-g++'"
Invoke-Expression -Command $Cmd
# Little hack to let Cygwin be installed correctly
while(-Not (Test-Path -Path "C:\CygwinX64\cygwin\bin\i686-w64-mingw32-g++.exe" -PathType leaf) ){
	Write-Host "[i] i686-w64-mingw32-g++.exe not yet installed..."
	Start-Sleep -Seconds 15
}
Write-Host "[V] i686-w64-mingw32-g++.exe installed."
while(-Not (Test-Path -Path "C:\CygwinX64\cygwin\bin\x86_64-w64-mingw32-g++.exe" -PathType leaf) ){
	Write-Host "[i] x86_64-w64-mingw32-g++.exe not yet installed..."
	Start-Sleep -Seconds 15
}
Write-Host "[V] x86_64-w64-mingw32-g++.exe installed."
$NewPath = $Env:PATH + ";C:\CygwinX64\cygwin\bin;"
[System.Environment]::SetEnvironmentVariable("PATH",$NewPath,[System.EnvironmentVariableTarget]::User)
