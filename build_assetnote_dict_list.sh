#!/bin/bash
# Script to download current up-to-date AssetNote interesting dictionaries
# See https://wordlists.assetnote.io/

# Generic download function
function download_dict () {
    base_url="https://s3.amazonaws.com/assetnote-wordlists/./data/automated"
    # Param 1: Position of the dict in the JSON array
    # See https://wordlists.assetnote.io/data/automated.json
    position=$1
    # Param 2: Target filename
    target_filename=$2
    # Retrieve the file name and download it
    filename=$(curl -s https://wordlists.assetnote.io/data/automated.json | jq --raw-output ".data[$position].Filename")
    wget -q "$base_url/$filename" -O $target_filename
    file $target_filename
    wc -l $target_filename
}

# Download operations
download_dict 1 "httparchive_directories_1m.txt"
download_dict 10 "httparchive_apiroutes.txt"
download_dict 11 "httparchive_parameters_top_1m.txt"