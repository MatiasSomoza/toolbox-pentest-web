![Build the image](https://github.com/righettod/toolbox-pentest-web/workflows/Build%20and%20deploy%20the%20image/badge.svg)

![Build PostgreSQL extension](https://github.com/righettod/toolbox-pentest-web/workflows/Build%20PostgreSQL%20extension/badge.svg?branch=master)

[![Check cheat sheet links validity](https://github.com/righettod/toolbox-pentest-web/actions/workflows/check_cheatsheet_external_links.yml/badge.svg?branch=master)](https://github.com/righettod/toolbox-pentest-web/actions/workflows/check_cheatsheet_external_links.yml)

# :factory: Welcome to my forge

<p align="center"><img src="forge.jpg"></p>

:clap: Image full credits goes to **Dirk Hoenes**: `https://pixabay.com/users/ptdh-275507`.

The goal of this image is to provide an, always up-to-date "box", containing materials (tools + scripts) useful in the context of the assessment of a web based application: site, api, etc.

# What it contains?  

## Tools

All tools are installed in the folder **/tools** and a transfert zone between the container and the host has been defined via the folder **/tools/reports**.

## BEEF

> Beef RP certificate is self signed but BURP will be used between the victim and the container in order to made the certificate valid → Burp CA will be installed on the victim.

Go into the folder **/tools/beef-conf** and run the script **start-beef.sh**.

## Helper scripts

The folder **[scripts](scripts)** contains helper scripts for some operations using embedded tools.

## Misc

The folder **[misc](misc)** contains materials that can be used for testing specific cases like for example when an app is using:

* [HTTP Signature](https://datatracker.ietf.org/doc/html/draft-cavage-http-signatures-12).
* [eIDAS certifcate and key materials](https://digital-strategy.ec.europa.eu/en/policies/eidas-regulation).

## Templates

The folder **[templates](templates)** contains several scripts/files that can be used as basis for custom scripts to speed-up the implementation of a POC.

## Dictionaries

The folder **[dictionaries](dictionaries)** contains several home made custom dictionaries that can be used for discovery operations.

## Technical hints

This **[file](docs/README.md)** contains several technicals hints for differents kinds of context/issues/goals. It's a kind of cheat sheet.

# Container usage on a docker host for direct access

Native docker on Linux or MacOS:

```bash
# Create a volume to share files with the container (ex: reports)
$ docker volume create --name shared_space
$ docker volume inspect shared_space
# Run container
$ docker run -v shared_space:/tools/reports -p 127.0.0.1:80:80 -i -t righettod/toolbox-pentest-web /bin/zsh
$ docker run -v shared_space:/tools/reports -p 192.168.206.128:80:80 -p 192.168.206.128:443:443 -i -t righettod/toolbox-pentest-web /bin/zsh
# Build image into local cache
$ docker build -t righettod/toolbox-pentest-web .
# Remove image from local cache
$ docker rmi -f righettod/toolbox-pentest-web
```

Docker for Windows:
```bat
rem Run container and define a shared folder
C:\> docker run -v F:/SharedFolder:/tools/reports -p 127.0.0.1:80:80 -i -t righettod/toolbox-pentest-web /bin/zsh
```

# Container usage for remote ssh access

> Private key to use for SSH authentication is [here](ssh-private-key.pem).

> This box is intented to be used as toolbox for a short running period.

1. Run the container on the target docker host using the following command line:

```bash
$ docker run -p 22:22 righettod/toolbox-pentest-web
Server listening on 0.0.0.0 port 22.
Server listening on :: port 22.
...
```

2. Access the container, via SSH, using the following command:

```bash
$ ssh -i ~/.ssh/ssh-private-key.pem root@[DOCKER_HOST_IP]
➜  ~
```

Add `"StrictHostKeyChecking=no"` in case of trouble with the remote keys because they are unique for each built image:
```bash
$ ssh -o "StrictHostKeyChecking=no" -i ~/.ssh/toolbox-ssh-private-key.pem root@[DOCKER_HOST_IP]
➜  ~
```

# DockerHub

Image is published [here](https://hub.docker.com/r/righettod/toolbox-pentest-web) each [day or at each commit](https://github.com/righettod/toolbox-pentest-web/actions) on the master branch.
